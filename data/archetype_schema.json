{
  "schemas": [
    {
      "type_id": "entry.trend_pullback",
      "schema_version": 1,
      "etag": "W/\"v2.entry.trend_pullback\"",
      "title": "Trend Pullback",
      "summary": "Enter with trend on dips/rallies gated by MA relation. For ADX gating, use a separate gate.regime card with ConditionSpec(type='regime', regime={metric='trend_adx'}).",
      "kind": "entry",
      "tags": [
        "spot",
        "trend",
        "mean-revert",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.trend_pullback.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "dip": {
                "$ref": "common_defs.schema.json#/$defs/BandEvent"
              },
              "dip_band": {
                "$ref": "common_defs.schema.json#/$defs/BandSpec"
              },
              "trend_gate": {
                "$ref": "common_defs.schema.json#/$defs/MASpec"
              }
            },
            "required": [
              "dip",
              "dip_band",
              "trend_gate"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "1h",
          "4h"
        ],
        "notes": "See BandSpec docs for bars→days conversion. event.dip_band.mult: values >2 are rare, >2.5 are very rare, >3 are extreme/dramatic. Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "BTC 1h: in uptrend (EMA20>EMA50), buy re-entry inside lower BB(20,2) with close confirm",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "BTC-USD"
            },
            "event": {
              "dip": {
                "kind": "reentry",
                "edge": "lower"
              },
              "dip_band": {
                "band": "bollinger",
                "length": 20,
                "mult": 2.0
              },
              "trend_gate": {
                "fast": 20,
                "slow": 50,
                "op": ">"
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm",
              "cooldown_bars": 3
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        },
        {
          "human": "ETH 1h: trend pullback with limit order 0.3% below entry, size 5% of equity",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "ETH-USD"
            },
            "event": {
              "dip": {
                "kind": "reentry",
                "edge": "lower"
              },
              "dip_band": {
                "band": "bollinger",
                "length": 20,
                "mult": 2.0
              },
              "trend_gate": {
                "fast": 20,
                "slow": 50,
                "op": ">"
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm",
              "execution": {
                "order_type": "limit",
                "limit_offset_pct": -0.3,
                "time_in_force": "day"
              },
              "sizing": {
                "type": "pct_equity",
                "pct": 5.0
              }
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.range_mean_reversion",
      "schema_version": 1,
      "etag": "W/\"v2.entry.range_mean_reversion\"",
      "title": "Range Mean-Reversion",
      "summary": "Fade extremes back toward the mean within a range regime.",
      "kind": "entry",
      "tags": [
        "spot",
        "range",
        "mean-revert",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.range_mean_reversion.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "band": {
                "$ref": "common_defs.schema.json#/$defs/BandSpec"
              },
              "entry": {
                "$ref": "common_defs.schema.json#/$defs/BandEvent"
              }
            },
            "required": [
              "band",
              "entry"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "15m",
          "1h"
        ],
        "notes": "See BandSpec docs for bars→days conversion. event.band.mult: values >2 are rare, >2.5 are very rare, >3 are extreme/dramatic. Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "ETH 15m: short when \u22651.8\u03c3 above mean (BB20,2; z=1.8), no confirm",
          "slots": {
            "context": {
              "tf": "15m",
              "symbol": "ETH-USD"
            },
            "event": {
              "band": {
                "band": "bollinger",
                "length": 20,
                "mult": 2.0
              },
              "entry": {
                "kind": "distance",
                "mode": "z",
                "side": "away_upper",
                "thresh": 1.8
              }
            },
            "action": {
              "direction": "short",
              "confirm": "none"
            },
            "risk": {
              "tp_pct": 1.0,
              "sl_pct": 1.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.breakout_trendfollow",
      "schema_version": 1,
      "etag": "W/\"v2.entry.breakout_trendfollow\"",
      "title": "Breakout Trend-Follow",
      "summary": "Enter on N-bar breakouts with optional buffer/confirm; with-trend bias.",
      "kind": "entry",
      "tags": [
        "spot",
        "breakout",
        "trend",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.breakout_trendfollow.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "breakout": {
                "$ref": "common_defs.schema.json#/$defs/BreakoutSpec"
              }
            },
            "required": [
              "breakout"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              },
              {
                "type": "object",
                "properties": {
                  "with_trend": {
                    "type": "boolean"
                  }
                }
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "1h",
          "4h"
        ],
        "notes": "Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "BTC 1h: go long on 50-bar high + 5bps buffer, close confirm",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "BTC-USD"
            },
            "event": {
              "breakout": {
                "lookback_bars": 50,
                "buffer_bps": 5
              }
            },
            "action": {
              "direction": "long",
              "with_trend": true,
              "confirm": "close_confirm"
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.breakout_retest",
      "schema_version": 1,
      "etag": "W/\"v2.entry.breakout_retest\"",
      "title": "Breakout Retest",
      "summary": "After a breakout, enter on retest pullback and continuation.",
      "kind": "entry",
      "tags": [
        "spot",
        "breakout",
        "structure",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.breakout_retest.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "retest": {
                "$ref": "common_defs.schema.json#/$defs/RetestSpec"
              }
            },
            "required": [
              "retest"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "1h",
          "4h"
        ],
        "notes": "Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "BTC 1h: long after breakout retest of prior high with 1.0 ATR pullback, confirm close",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "BTC-USD"
            },
            "event": {
              "retest": {
                "break_lookback_bars": 50,
                "pullback_depth_atr": 1.0
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm"
            },
            "risk": {
              "sl_atr": 1.5
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.squeeze_expansion",
      "schema_version": 1,
      "etag": "W/\"v2.entry.squeeze_expansion\"",
      "title": "Squeeze \u2192 Expansion",
      "summary": "Detect volatility compression then enter on expansion with breakout rule.",
      "kind": "entry",
      "tags": [
        "spot",
        "volatility",
        "squeeze",
        "breakout",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.squeeze_expansion.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "squeeze": {
                "$ref": "common_defs.schema.json#/$defs/SqueezeSpec"
              }
            },
            "required": [
              "squeeze"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "1h",
          "4h"
        ],
        "notes": "Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "ETH 1h: enter on squeeze expansion when BB width pctile < 10 and break via Donchian",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "ETH-USD"
            },
            "event": {
              "squeeze": {
                "metric": "bb_width_pctile",
                "pctile_min": 10,
                "break_rule": "donchian",
                "with_trend": true
              }
            },
            "action": {
              "direction": "auto",
              "confirm": "close_confirm"
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.intermarket_trigger",
      "schema_version": 1,
      "etag": "W/\"v2.entry.intermarket_trigger\"",
      "title": "Intermarket Trigger (Leader\u2192Follower)",
      "summary": "Trade follower when leader moves per trigger within a window.",
      "kind": "entry",
      "tags": [
        "spot",
        "intermarket",
        "event",
        "equity",
        "crypto",
        "fx"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.intermarket_trigger.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "lead_follow": {
                "$ref": "common_defs.schema.json#/$defs/IntermarketSpec"
              }
            },
            "required": [
              "lead_follow"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true,
        "mvp_single_asset": {
          "description": "MVP CONSTRAINT: context.symbol MUST equal event.lead_follow.follower_symbol. Verifier will enforce this. The follower_symbol is the ONLY tradable symbol. Leader symbols are observation-only triggers."
        }
      },
      "slot_hints": {
        "notes": "MVP CONSTRAINT: context.symbol MUST equal event.lead_follow.follower_symbol. The follower_symbol is the ONLY tradable symbol. Leader symbols are observation-only triggers. entry_side_map chooses follower direction by leader move."
      },
      "examples": [
        {
          "human": "Buy TSLA when NVDA up >3% in 1d; close confirm",
          "slots": {
            "context": {
              "tf": "1d",
              "symbol": "TSLA"
            },
            "event": {
              "lead_follow": {
                "leader_symbol": "NVDA",
                "follower_symbol": "TSLA",
                "trigger_feature": "ret_pct",
                "trigger_threshold": 3.0,
                "window_bars": 1,
                "entry_side_map": {
                  "leader_up": "long",
                  "leader_down": "none"
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm"
            },
            "risk": {
              "time_stop_bars": 5,
              "sl_pct": 3.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.avwap_reversion",
      "schema_version": 1,
      "etag": "W/\"v2.entry.avwap_reversion\"",
      "title": "Anchored VWAP Reversion",
      "summary": "Trade toward anchored VWAP when distance exceeds sigma threshold.",
      "kind": "entry",
      "tags": [
        "spot",
        "vwap",
        "mean-revert",
        "equity",
        "crypto",
        "fx"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.avwap_reversion.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "anchor": {
                "$ref": "common_defs.schema.json#/$defs/VWAPAnchorSpec"
              },
              "dist_sigma_entry": {
                "type": "number",
                "minimum": 0.1,
                "maximum": 10.0
              }
            },
            "required": [
              "anchor",
              "dist_sigma_entry"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              },
              {
                "type": "object",
                "properties": {
                  "tp_to_vwap": {
                    "type": "boolean"
                  }
                }
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "1h",
          "4h"
        ],
        "notes": "Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "BTC 1h: long when price 1.5\u03c3 below AVWAP (YTD), take-profit at VWAP",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "BTC-USD"
            },
            "event": {
              "anchor": {
                "anchor": "ytd"
              },
              "dist_sigma_entry": 1.5
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm",
              "tp_to_vwap": true
            },
            "risk": {
              "sl_atr": 1.5
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.event_followthrough",
      "schema_version": 1,
      "etag": "W/\"v2.entry.event_followthrough\"",
      "title": "Event / Catalyst Follow-Through",
      "summary": "Enter after a discrete catalyst within an entry window and strength filter.",
      "kind": "entry",
      "tags": [
        "spot",
        "event",
        "news",
        "equity",
        "crypto",
        "fx"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.event_followthrough.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "type": "object",
            "properties": {
              "symbol": {
                "type": "string"
              }
            },
            "required": [
              "symbol"
            ],
            "additionalProperties": false
          },
          "event": {
            "type": "object",
            "properties": {
              "event": {
                "$ref": "common_defs.schema.json#/$defs/EventSpec"
              }
            },
            "required": [
              "event"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              },
              {
                "type": "object",
                "properties": {
                  "hold_horizon_bars": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5000
                  }
                }
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "notes": "Event-driven context: symbol required, tf not required (time driven by event timing). Strength filter comes from your ingestion/event scoring pipeline."
      },
      "examples": [
        {
          "human": "AAPL: post-earnings strong signal within 3 bars; hold 10 bars",
          "slots": {
            "context": {
              "symbol": "AAPL"
            },
            "event": {
              "event": {
                "event_kind": "earnings",
                "entry_window_bars": 3,
                "strength_filter": "strong"
              }
            },
            "action": {
              "direction": "auto",
              "hold_horizon_bars": 10
            },
            "risk": {
              "sl_pct": 2.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.gap_play",
      "schema_version": 1,
      "etag": "W/\"v2.entry.gap_play\"",
      "title": "Gap Play (Open)",
      "summary": "Trade session gap: gap-fade or gap-and-go with session gate.",
      "kind": "entry",
      "tags": [
        "spot",
        "session",
        "gap",
        "equity",
        "crypto",
        "fx"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.gap_play.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "session": {
                "$ref": "common_defs.schema.json#/$defs/SessionSpec"
              }
            },
            "required": [
              "session"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "notes": "Engine derives gap vs prior close; window is trading session subrange."
      },
      "examples": [
        {
          "human": "US session 0930-1100: gap-fade on TSLA, no confirm",
          "slots": {
            "context": {
              "symbol": "TSLA"
            },
            "event": {
              "session": {
                "session": "us",
                "window": "0930-1100",
                "mode": "gap_fade"
              }
            },
            "action": {
              "direction": "auto",
              "confirm": "none"
            },
            "risk": {
              "tp_rr": 1.5,
              "sl_atr": 1.2
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    },
    {
      "type_id": "entry.rule_trigger",
      "schema_version": 1,
      "etag": "W/\"v1.entry.rule_trigger\"",
      "title": "Rule-Based Entry",
      "summary": "Generic entry triggered by a ConditionSpec. Use for simple rule-based entries like 'buy if ret_pct <= 1%' or 'avoid trading on big gap days'. Supports composable conditions via ConditionSpec (use type='regime' for single conditions).",
      "kind": "entry",
      "tags": [
        "spot",
        "rule",
        "generic",
        "crypto",
        "fx",
        "equity"
      ],
      "json_schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "$id": "./entry.rule_trigger.schema.json",
        "type": "object",
        "properties": {
          "context": {
            "$ref": "common_defs.schema.json#/$defs/ContextSpec"
          },
          "event": {
            "type": "object",
            "properties": {
              "condition": {
                "$ref": "common_defs.schema.json#/$defs/ConditionSpec",
                "description": "Condition that triggers the entry. Use ConditionSpec with type='regime' for single conditions, or compose multiple conditions with allOf/anyOf/not/sequence."
              }
            },
            "required": [
              "condition"
            ],
            "additionalProperties": false
          },
          "action": {
            "allOf": [
              {
                "$ref": "common_defs.schema.json#/$defs/EntryActionSpec"
              }
            ]
          },
          "risk": {
            "$ref": "common_defs.schema.json#/$defs/PositionRiskSpec"
          }
        },
        "required": [
          "context",
          "event",
          "action"
        ],
        "additionalProperties": false
      },
      "constraints": {
        "min_history_bars": 100,
        "pit_safe": true
      },
      "slot_hints": {
        "preferred_tfs": [
          "15m",
          "1h",
          "4h",
          "1d"
        ],
        "notes": "Use this archetype for simple rule-based entries. The condition field accepts ConditionSpec. For single conditions, use ConditionSpec with type='regime' and a RegimeSpec object. RegimeSpec metrics include: ret_pct, gap_pct, dist_from_vwap_pct, trend_regime, vol_regime, session_phase, etc. ConditionSpec supports logical composition (allOf, anyOf, not, sequence) for complex conditions. For complex pattern-based entries, use pattern-specific archetypes instead. Optional action.execution specifies order type (market/limit/stop) and execution parameters. Optional action.sizing specifies position sizing (fixed USD, fixed units, or percentage of equity/position)."
      },
      "examples": [
        {
          "human": "BTC 1d: buy if day not up more than 1% (ret_pct <= 1%)",
          "slots": {
            "context": {
              "tf": "1d",
              "symbol": "BTC-USD"
            },
            "event": {
              "condition": {
                "type": "regime",
                "regime": {
                  "metric": "ret_pct",
                  "tf": "1d",
                  "op": "<=",
                  "value": 1.0,
                  "lookback_bars": 1
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "none"
            },
            "risk": {
              "sl_pct": 2.0
            }
          }
        },
        {
          "human": "BTC Sunday strategy: buy if day not up more than 1% (use with gate.time_filter for Sunday-only)",
          "slots": {
            "context": {
              "tf": "1d",
              "symbol": "BTC-USD"
            },
            "event": {
              "condition": {
                "type": "regime",
                "regime": {
                  "metric": "ret_pct",
                  "tf": "1d",
                  "op": "<=",
                  "value": 1.0,
                  "lookback_bars": 1
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "none"
            },
            "risk": {
              "sl_pct": 2.0,
              "tp_pct": 3.0
            }
          },
          "note": "This entry card should be used with a gate.time_filter card that has days_of_week=['sunday'] and action.target_roles=['entry'] to restrict trading to Sundays only."
        },
        {
          "human": "ETH 1h: avoid trading on days with gap > 2%",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "ETH-USD"
            },
            "event": {
              "condition": {
                "type": "regime",
                "regime": {
                  "metric": "gap_pct",
                  "session": "us",
                  "op": "<=",
                  "value": 2.0
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "none"
            },
            "risk": {
              "sl_atr": 1.5
            }
          }
        },
        {
          "human": "AAPL 1h: buy when price > 3% below YTD VWAP",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "AAPL"
            },
            "event": {
              "condition": {
                "type": "regime",
                "regime": {
                  "metric": "dist_from_vwap_pct",
                  "tf": "1h",
                  "op": "<",
                  "value": -3.0,
                  "vwap_anchor": {
                    "anchor": "ytd"
                  }
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm"
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        },
        {
          "human": "BTC 4h: only trade in uptrend regime",
          "slots": {
            "context": {
              "tf": "4h",
              "symbol": "BTC-USD"
            },
            "event": {
              "condition": {
                "type": "regime",
                "regime": {
                  "metric": "trend_regime",
                  "tf": "4h",
                  "op": "==",
                  "value": "up",
                  "ma_fast": 20,
                  "ma_slow": 50
                }
              }
            },
            "action": {
              "direction": "long",
              "confirm": "none"
            },
            "risk": {
              "sl_atr": 1.5
            }
          }
        },
        {
          "human": "ETH 1h: buy on dip (price 1.5σ below mean) BUT only if in uptrend (EMA20 > EMA50)",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "ETH-USD"
            },
            "event": {
              "condition": {
                "type": "allOf",
                "allOf": [
                  {
                    "type": "regime",
                    "regime": {
                      "metric": "trend_ma_relation",
                      "tf": "1h",
                      "op": ">",
                      "value": 0.0,
                      "ma_fast": 20,
                      "ma_slow": 50,
                      "lookback_bars": 200
                    }
                  },
                  {
                    "type": "regime",
                    "regime": {
                      "metric": "dist_from_vwap_pct",
                      "tf": "1h",
                      "op": "<",
                      "value": -1.5,
                      "vwap_anchor": {
                        "anchor": "session_open"
                      },
                      "lookback_bars": 24
                    }
                  }
                ]
              }
            },
            "action": {
              "direction": "long",
              "confirm": "close_confirm"
            },
            "risk": {
              "sl_atr": 2.0
            }
          }
        },
        {
          "human": "BTC 1h: buy with limit order 0.2% below current price, fixed $1000 per trade",
          "slots": {
            "context": {
              "tf": "1h",
              "symbol": "BTC-USD"
            },
            "event": {
              "condition": {
                "metric": "ret_pct",
                "tf": "1h",
                "op": "<=",
                "value": 1.0,
                "lookback_bars": 1
              }
            },
            "action": {
              "direction": "long",
              "confirm": "none",
              "execution": {
                "order_type": "limit",
                "limit_offset_pct": -0.2,
                "time_in_force": "day"
              },
              "sizing": {
                "type": "fixed_usd",
                "usd": 1000
              }
            },
            "risk": {
              "sl_pct": 2.0
            }
          }
        }
      ],
      "updated_at": "2025-12-02T17:58:21Z"
    }
  ]
}